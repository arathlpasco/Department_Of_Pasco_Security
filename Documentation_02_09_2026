# Technical Documentation: Phase 1 - Gateway Provisioning
**Project:** Department of Pasco Security (DPS) Home Lab  
**Author:** Arath Luis Pasco  
**Date:** February 9, 2026  

---

## 1. Workstation & System Isolation
To maintain system hygiene and protect academic data, a dedicated macOS User Profile was established for this project. This ensures virtualization experiments remain isolated from primary system resources and prevents accidental interference with personal school files.

### **Storage Strategy**
All assets are persistent on an external **2TB SSD**, formatted for optimal Apple Silicon throughput and encrypted for data security.
![Disk Utility formatting the LaCie drive as APFS Encrypted](Arath_Driver_Format.png)

---

## 2. Image Preparation & Virtual Disk Engineering
The OPNsense raw image was converted to a VMware-compatible format (`.vmdk`) using the `qemu-img` utility.

### **Hardware Compatibility Fix**
Initial boot failed due to a driver mismatch with the default NVMe bus. I reconfigured the Virtual Disk Bus to **SATA** to ensure the FreeBSD kernel could initialize the storage successfully.

---

## 3. Network Architecture: The "Two-Door" Model
The lab utilizes a dual-homed configuration to isolate internal traffic from the internet.

| Interface | VMware Setting | Purpose |
| :--- | :--- | :--- |
| **WAN (em0)** | Bridged (Autodetect) | Internet uplink via host Wi-Fi. |
| **LAN (em1)** | Custom (`DPS_INTERNAL_NETWORK\`) | Private gateway for internal assets. |

### **Virtual Hardware Configuration**
The following screenshots confirm the precise mapping of the virtual network adapters and subnets within VMware Fusion.

**Adapter 1 (WAN - em0)** ![VMware settings showing Network Adapter 1 set to Bridged Autodetect](FreeBSD_14_Network_Adapter_Config.png)

**Adapter 2 (LAN - em1)** ![VMware settings showing Network Adapter 2 set to Custom DPS_INTERNAL_NETWORK](FreeBSD_14_Network_Adapter_2_Config.png)

**Hypervisor Level Network (Subnet Definition)** ![VMware Network Preferences showing DPS_INTERNAL_NETWORK defined as 10
